:root{--bg:#f8fafc;--card:#fff;--primary:#2563eb;--ok:#16a34a;--warn:#ef4444;--text:#111827;--muted:#6b7280;--shadow:0 10px 25px rgba(0,0,0,.08);--arena-h:clamp(180px,36vh,320px);--char-h:clamp(90px,26vh,200px);--proj-size:clamp(18px,3vh,28px)}
*{box-sizing:border-box}
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--text);background:linear-gradient(#e0f2fe,var(--bg));min-height:100dvh;display:flex;flex-direction:column}
header{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:14px 18px;background:#fff;box-shadow:var(--shadow);position:sticky;top:0;z-index:20}
header h1{font-size:18px;margin:0}
#studentBadge{font-size:14px;color:var(--muted)}
#logoutBtn{background:#94a3b8!important;color:#fff;padding:6px 10px!important;font-size:14px!important;width:auto!important}
#logoutBtn:hover{background:#64748b!important}
.wrap{max-width:960px;width:100%;margin:24px auto;padding:0 16px;flex:1}
.card{background:var(--card);box-shadow:var(--shadow);border-radius:14px;padding:20px}
.form{display:grid;grid-template-columns:1fr;gap:12px;margin-top:10px}
label{font-size:14px;color:var(--muted)}
input,select,button{width:100%;padding:12px 14px;border-radius:10px;border:1px solid #d1d5db;font-size:16px;outline:none;transition:box-shadow .2s,transform .02s;background:#fff}
input:focus,select:focus{box-shadow:0 0 0 3px rgba(37,99,235,.2);border-color:#93c5fd}
button{background:var(--primary);color:#fff;border:none;cursor:pointer;font-weight:600}
button:hover{filter:brightness(1.05)}
button:active{transform:translateY(1px)}
.row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.hint{color:var(--muted);font-size:13px;margin-top:6px}
.error{color:var(--warn);font-weight:600;margin-top:8px}
.ok{color:var(--ok);font-weight:600;margin-top:8px}
#game{margin-top:18px}.quiz-container{padding:20px;box-shadow:var(--shadow)}
.quiz-container h1,.quiz-container h2{text-align:center;margin:4px 0 10px}
.quiz-container h2{color:#374151;font-size:clamp(16px,2.8vw,22px)}
#lives{display:flex;justify-content:center;gap:6px;margin-bottom:8px;flex-wrap:wrap}
.heart{width:clamp(18px,3.6vw,28px);height:clamp(18px,3.6vw,28px);background:radial-gradient(circle at 30% 30%,#ef4444,#b91c1c);clip-path:path("M16 28C8 22 2 18 2 11C2 7 5 4 9 4C12 4 14 6 16 8C18 6 20 4 23 4C27 4 30 7 30 11C30 18 24 22 16 28Z");filter:drop-shadow(0 1px 1px rgba(0,0,0,.25))}
.heart.off{opacity:.25;filter:grayscale(.7)}
#mainProgress{background:#e5e7eb;border-radius:14px;overflow:hidden;height:20px;margin-bottom:8px}
#mainBar{height:100%;width:0;background:linear-gradient(90deg,#22c55e,#16a34a);transition:width .4s ease}
#subBars{display:grid;grid-template-columns:1fr 1fr;gap:8px 16px;margin-bottom:8px}
.subProgress{background:#e5e7eb;border-radius:10px;height:14px;overflow:hidden;position:relative;cursor:pointer}
.subBar{height:100%;width:0;background:linear-gradient(90deg,#60a5fa,#2563eb);transition:width .4s ease}
.subLabel{position:absolute;top:0;left:6px;font-size:12px;color:#fff;text-shadow:0 0 2px rgba(0,0,0,.5);line-height:14px;font-weight:600}
.subProgress:hover{background:#f0f9ff}
#overlay,#correctionOverlay{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:50;color:#fff;text-align:center;padding:20px}
#overlay{background:rgba(0,0,0,.55)}
#correctionOverlay{background:rgba(0,0,0,.85)}
#overlay .panel{background:#0f172a;border-radius:16px;padding:20px;width:min(520px,92%);box-shadow:0 20px 60px rgba(0,0,0,.4)}
#overlay h3{margin:0 0 8px;font-size:clamp(18px,4.6vw,26px)}
#overlay button,#correctionOverlay button{margin-top:8px;padding:10px 16px;border:0;border-radius:10px;cursor:pointer;background:#22c55e;color:#fff}
#correctionOverlay .correction-box{background:#fee2e2;color:#b91c1c;border-radius:20px;padding:40px;box-shadow:0 10px 30px rgba(0,0,0,.5);width:min(600px,95%)}
#correctionOverlay h2{font-size:clamp(24px,6vw,40px);margin-bottom:10px;color:#b91c1c}
#correctionOverlay p{font-size:clamp(18px,4vw,30px);font-weight:700;margin-top:0}
.chapter-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-top:20px}
.chapter-box{background:linear-gradient(45deg,#3b82f6,#60a5fa);color:#fff;padding:24px;border-radius:14px;cursor:pointer;transition:transform .2s,box-shadow .2s;box-shadow:0 4px 15px rgba(0,0,0,.1)}
.chapter-box:hover{transform:translateY(-5px);box-shadow:0 8px 25px rgba(0,0,0,.15)}
.chapter-box h3{margin:0;font-size:20px}
.chapter-box p{margin:5px 0 0;opacity:.9}
.chapter-box.disabled{background:#9ca3af;cursor:not-allowed;opacity:.7}
#gameModuleContainer #question{font-size:clamp(16px,3.5vw,20px);margin:12px 0 6px;text-align:center}
#gameModuleContainer #feedback{margin:8px auto 0;text-align:center;min-height:1.6em;font-weight:700}
#gameModuleContainer #choices{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin:8px auto;max-width:680px}
#gameModuleContainer .choice{border:1px solid #d1d5db;border-radius:10px;padding:clamp(8px,2vw,12px);cursor:pointer;background:#fff;text-align:center;transition:transform .08s,box-shadow .2s;font-size:clamp(14px,2.8vw,16px)}
.choice:hover{box-shadow:0 5px 10px rgba(0,0,0,.08);transform:translateY(-2px)}
.choice.correct{background:#dcfce7;border-color:#22c55e}
.choice.wrong{background:#fee2e2;border-color:#ef4444}
#gameModuleContainer #freeInputZone{display:none;text-align:center;margin-top:8px}
#gameModuleContainer #answer{padding:8px;width:min(680px,90%);font-size:clamp(14px,2.8vw,16px)}
#gameModuleContainer #submit{margin-top:8px;padding:10px 14px;background:#22c55e;color:#fff;border:0;border-radius:8px;cursor:pointer}
#gameModuleContainer #submit:hover{background:#16a34a}
#gameModuleContainer #arena{position:relative;height:var(--arena-h);margin-top:10px;background:linear-gradient(#f0f9ff,#e0f2fe);border-radius:12px;overflow:hidden;box-shadow:inset 0 -6px 0 #cbd5e1}
#gameModuleContainer #hero,#gameModuleContainer #zombie,#gameModuleContainer #projectile{position:absolute;bottom:0;height:var(--char-h);max-width:32vw;object-fit:contain;-webkit-user-select:none;user-select:none;pointer-events:none}
#gameModuleContainer #hero{left:min(3vw,24px)}
#gameModuleContainer #zombie{right:min(3vw,24px);transition:right .08s linear}
#gameModuleContainer #projectile{width:var(--proj-size);height:var(--proj-size);background:radial-gradient(circle,#38bdf8 0%,#0284c7 80%);border-radius:50%;display:none;bottom:calc(var(--char-h)*.55)}
#playersTable th{font-weight:600;padding:10px;border-bottom:1px solid #e2e8f0;text-align:left}
#playersTable td{padding:10px;border-bottom:1px solid #f1f5f9;vertical-align:middle}
.subProgress.saved-success{animation:flash-green 0.6s ease-out}
@keyframes flash-green{0%{background-color:#e5e7eb}50%{background-color:#dcfce7;box-shadow:0 0 10px #22c55e}100%{background-color:#e5e7eb}}
.level-title{font-size:11px;color:#475569;margin-bottom:4px}
.questions-list{display:flex;flex-wrap:wrap;gap:4px}
.question-indicator{width:22px;height:22px;border-radius:4px;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:700;color:#fff;border:1px solid rgba(0,0,0,0.1)}
.question-valid{background-color:#22c55e}
.question-invalid{background-color:#ef4444}
.level-progress{font-size:10px;color:#64748b;margin-top:3px}
.finished-badge{background-color:#f59e0b;color:#fff;padding:3px 8px;border-radius:12px;font-size:12px;font-weight:700}
.action-btn{padding:5px 10px!important;font-size:12px!important;border:none;border-radius:6px;cursor:pointer;margin:2px;width:auto!important}
.reset-btn{background-color:#fee2e2!important;color:#b91c1c}
.reset-btn:hover{background-color:#fecaca!important}